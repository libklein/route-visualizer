# RV - A simple route visualizer

RV is a simple route visualizer that allows you to easily visualize routes.
The minimal input is list of routes, which each contain a list of coordinates.
The generated html can run without a server, allowing to generate visualizations with simple curl requests.
These urls could be the, e.g., the output of an optimization algorithm.

## Features

* Pass locations in the URL - opening the link will render the map
* Pass additional attributes (metadata, styles, etc.) via POST
* Render routes based on additional attributes

## Usage

```
https://rv.libklein.com/lat1,lng1|lat2,lng2|lat3,lng3;\[route_color\]/lat1,lng1|...|latn,lngn;\[route_color\]/
```

### Page slug structure

Routes are separated by `/`, coordinates of individual locations by `|`.
Routes can optionally be colored by appending `;color` to the route.

### Examples

[Coordinates only](https://rv.libklein.com/51.56437980295347,0.18285424809952922|51.386956944698404,-0.21727448451863496|51.46143277177264,-0.043904259231080434|51.301381084434425,-0.10829271186155515|51.55368919351999,-0.09144332049822368|51.39372798958227,-0.00382127945798838|51.52780632881767,0.032502730249054035/51.50106090721147,-0.42169923064959536|51.48731733887137,-0.16285348277148348|51.34215958072225,0.07023648854147291|51.30599909056424,0.23794624509184714|51.601743144130744,0.053914537731173495|51.52753042401098,-0.16332266374955579/51.35364396999819,-0.36283713804957646|51.303339165842516,0.11026739226195037|51.491599933611624,0.06750798923607426|51.36942857733666,-0.33527893220819405)
```
https://rv.libklein.com/51.56437980295347,0.18285424809952922|51.386956944698404,-0.21727448451863496|51.46143277177264,-0.043904259231080434|51.301381084434425,-0.10829271186155515|51.55368919351999,-0.09144332049822368|51.39372798958227,-0.00382127945798838|51.52780632881767,0.032502730249054035/51.50106090721147,-0.42169923064959536|51.48731733887137,-0.16285348277148348|51.34215958072225,0.07023648854147291|51.30599909056424,0.23794624509184714|51.601743144130744,0.053914537731173495|51.52753042401098,-0.16332266374955579/51.35364396999819,-0.36283713804957646|51.303339165842516,0.11026739226195037|51.491599933611624,0.06750798923607426|51.36942857733666,-0.33527893220819405

```

[Manually specifying colors](https://rv.libklein.com/51.56437980295347,0.18285424809952922|51.386956944698404,-0.21727448451863496|51.46143277177264,-0.043904259231080434|51.301381084434425,-0.10829271186155515|51.55368919351999,-0.09144332049822368|51.39372798958227,-0.00382127945798838|51.52780632881767,0.032502730249054035;red/51.50106090721147,-0.42169923064959536|51.48731733887137,-0.16285348277148348|51.34215958072225,0.07023648854147291|51.30599909056424,0.23794624509184714|51.601743144130744,0.053914537731173495|51.52753042401098,-0.16332266374955579;%2300ff00/51.35364396999819,-0.36283713804957646|51.303339165842516,0.11026739226195037|51.491599933611624,0.06750798923607426|51.36942857733666,-0.33527893220819405;yellow)
```
https://rv.libklein.com/51.56437980295347,0.18285424809952922|51.386956944698404,-0.21727448451863496|51.46143277177264,-0.043904259231080434|51.301381084434425,-0.10829271186155515|51.55368919351999,-0.09144332049822368|51.39372798958227,-0.00382127945798838|51.52780632881767,0.032502730249054035;red/51.50106090721147,-0.42169923064959536|51.48731733887137,-0.16285348277148348|51.34215958072225,0.07023648854147291|51.30599909056424,0.23794624509184714|51.601743144130744,0.053914537731173495|51.52753042401098,-0.16332266374955579;%2300ff00/51.35364396999819,-0.36283713804957646|51.303339165842516,0.11026739226195037|51.491599933611624,0.06750798923607426|51.36942857733666,-0.33527893220819405;yellow
```


## Advanced usage [TODO]

The server support advanced styling via POST requests. The format is outlined below.

```bash 
https https://rv.libklein.com/render/
```

```typescript
export interface LngLat {
  lng: number,
  lat: number
}

export interface Drop {
  location: LngLat
  style: object
  metadata?: object
}

export interface Route {
  drops: Drop[],
  style: {
    paint: maplibregl.LineLayerSpecification['paint'];
    layout: maplibregl.LineLayerSpecification['layout'] | undefined;
  },
  metadata?: object
}

export interface Solution {
  routes: Route[];
}
```

## Developing

Once you've created a project and installed dependencies with `npm install` (or `pnpm install` or `yarn`), start a development server:

```bash
npm run dev

# or start the server and open the app in a new browser tab
npm run dev -- --open
```

## Building

To create a production version of your app:

```bash
npm run build
```

You can preview the production build with `npm run preview`.

> To deploy your app, you may need to install an [adapter](https://kit.svelte.dev/docs/adapters) for your target environment.
